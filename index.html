<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Hungry Hunter Pro | Web AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon: #00f2fe;
            --dark: #0a0c10;
            --card-bg: #161a22;
            --border: #1e2633;
            --red: #ff4b2b;
            --green: #00f2fe;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            background-color: var(--dark);
            color: #ffffff;
            font-family: 'Outfit', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 20px;
            background: #000;
            border-bottom: 2px solid var(--neon);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 242, 254, 0.2);
        }

        .logo {
            font-weight: 900;
            font-size: 20px;
            color: var(--neon);
            letter-spacing: 1px;
        }

        .container {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px 20px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .prediction-box {
            font-size: 44px;
            font-weight: 900;
            color: #fff;
            margin: 15px 0;
            text-transform: uppercase;
        }

        .label {
            color: var(--neon);
            font-size: 12px;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 2px;
        }

        #settings {
            display: none;
            background: #000;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #333;
            margin-bottom: 5px;
        }

        input {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            color: var(--neon);
            padding: 14px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
            outline: none;
        }

        .status {
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status.online {
            color: #00ff00;
        }

        .status.online .dot {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .status.offline {
            color: var(--red);
        }

        .status.offline .dot {
            background: var(--red);
            box-shadow: 0 0 10px var(--red);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: auto;
            margin-bottom: 20px;
        }

        .btn {
            flex: 1;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 900;
            cursor: pointer;
            transition: 0.2s;
        }

        .start-btn {
            background: var(--green);
            color: #000;
            box-shadow: 0 5px 15px rgba(0, 242, 254, 0.3);
        }

        .stop-btn {
            background: var(--red);
            color: #fff;
            box-shadow: 0 5px 15px rgba(255, 75, 43, 0.3);
            display: none;
        }

        .predict-btn {
            width: 100%;
            background: #fff;
            color: #000;
            display: none;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }

        .btn:active {
            transform: scale(0.96);
            opacity: 0.9;
        }

        .strategy-text {
            font-size: 15px;
            color: #cbd5e1;
            line-height: 1.6;
            text-align: left;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="logo">HUNGRY HUNTER PRO</div>
        <div onclick="toggleSettings()" style="cursor: pointer; font-size: 24px;">⚙️</div>
    </div>

    <div class="container">
        <div id="settings">
            <span class="label">Gemini API Key</span>
            <input type="password" id="apiKey" placeholder="Paste Key & Press Enter" onchange="saveKey()">
        </div>

        <div class="card">
            <div id="statusIndicator" class="status offline"><span class="dot"></span> ENGINE OFFLINE</div>
            <div class="label">SIGNAL PREDICTION</div>
            <div class="prediction-box" id="prediction">OFF</div>
            <div style="font-size: 18px; color: var(--neon); font-weight: 800;">
                CONFIDENCE: <span id="conf">--</span>%
            </div>
        </div>

        <div class="card" style="flex: 1;">
            <div class="label" style="margin-bottom: 12px; text-align: left;">AI STRATEGY</div>
            <div id="strategy" class="strategy-text">
                Press START to activate the AI Hunter Engine.
            </div>
        </div>

        <button id="predictBtn" class="btn predict-btn" onclick="getPrediction()">AI PREDICT</button>

        <div class="btn-group">
            <button id="startBtn" class="btn start-btn" onclick="toggleEngine(true)">START ENGINE</button>
            <button id="stopBtn" class="btn stop-btn" onclick="toggleEngine(false)">STOP ENGINE</button>
        </div>
    </div>

    <script>
        const items = ["Chai", "Samosa", "Softy", "Popcorn", "Chocolate", "Laddu", "Burger", "Pizza"];
        let isEngineRunning = false;

        const el = {
            pred: document.getElementById('prediction'),
            conf: document.getElementById('conf'),
            strat: document.getElementById('strategy'),
            set: document.getElementById('settings'),
            key: document.getElementById('apiKey'),
            status: document.getElementById('statusIndicator'),
            startBtn: document.getElementById('startBtn'),
            stopBtn: document.getElementById('stopBtn'),
            predictBtn: document.getElementById('predictBtn')
        };

        function toggleSettings() { el.set.style.display = el.set.style.display === 'block' ? 'none' : 'block'; }

        function saveKey() {
            localStorage.setItem('hunter_key', el.key.value);
            alert("Key Saved!");
            toggleSettings();
        }

        function toggleEngine(start) {
            isEngineRunning = start;
            if (start) {
                el.status.className = "status online";
                el.status.innerHTML = '<span class="dot"></span> ENGINE ACTIVE';
                el.pred.textContent = "READY";
                el.strat.textContent = "Engine is running. Press Predict when round ends.";
                el.startBtn.style.display = "none";
                el.stopBtn.style.display = "block";
                el.predictBtn.style.display = "block";
            } else {
                el.status.className = "status offline";
                el.status.innerHTML = '<span class="dot"></span> ENGINE OFFLINE';
                el.pred.textContent = "OFF";
                el.conf.textContent = "--";
                el.strat.textContent = "Press START to activate the AI Hunter Engine.";
                el.startBtn.style.display = "block";
                el.stopBtn.style.display = "none";
                el.predictBtn.style.display = "none";
            }
        }

        async function getPrediction() {
            if (!isEngineRunning) return;

            const key = localStorage.getItem('hunter_key');
            if (!key) { alert("Add API Key in Settings!"); toggleSettings(); return; }

            el.pred.textContent = "THINKING";
            el.strat.textContent = "AI is analyzing Moj Hungry Game patterns...";

            try {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`;
                const prompt = `Predict next winner for Moj Hungry Game (Items: ${items.join(", ")}). Response JSON: {"item": "NAME", "confidence": %, "strategy": "..."}. JSON ONLY.`;

                const res = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await res.json();
                const text = data.candidates[0].content.parts[0].text;
                const result = JSON.parse(text.replace(/```json|```/g, '').trim());

                el.pred.textContent = result.item.toUpperCase();
                el.conf.textContent = result.confidence;
                el.strat.textContent = result.strategy;

                if (navigator.vibrate) navigator.vibrate(100);

                setTimeout(() => {
                    if (isEngineRunning) {
                        el.pred.textContent = "READY";
                        el.strat.textContent = "Waiting for next round...";
                    }
                }, 10000);

            } catch (error) {
                el.pred.textContent = "ERROR";
                el.strat.textContent = "Check Key or Connection.";
            }
        }

        window.onload = () => { if (localStorage.getItem('hunter_key')) el.key.value = localStorage.getItem('hunter_key'); };
    </script>
</body>

</html>
